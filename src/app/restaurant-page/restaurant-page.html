<div class="container my-4">


  <a routerLink="/" class="text-decoration-none text-dark">
    <div class="d-flex align-items-center mb-3">
      <i class="bi bi-arrow-left me-2"></i>
      <span>Volver</span>
    </div>
  </a>

  @if (user) {
  <div class="card shadow-sm p-4 mb-4">

    <h2 class="text-center fw-bold mb-3">
      {{ user.restaurantName }}
    </h2>

    <div class="text-center mb-3">
      @if (restaurantService.isFavoriteRestaurant(user.id)) {
      <span class="badge bg-warning text-dark">⭐ Favorito</span>
      }
    </div>
    <div class="mb-3">
      <p class="mb-1"><i class="bi bi-telephone me-2"></i>{{ user.phoneNumber }}</p>
      <p class="mb-1"><i class="bi bi-geo-alt me-2"></i>{{ user.address }}</p>
    </div>
    <div class="text-center mb-3">
      @if (restaurantService.isFavoriteRestaurant(user.id)) {
      <button class="btn btn-outline-warning" (click)="toggleFavorite()">Desmarcar como favorito</button>
      } @else {
      <button class="btn btn-warning" (click)="toggleFavorite()">Marcar como favorito</button>
      }
    </div>
  </div>
  @if (productsService.restaurantProducts.length === 0) {
  <div class="alert alert-info text-center">
    Todavía no hay productos.
    <button class="link-button" (click)="goToRestaurants()">
      ¡Explorar otros restaurantes!
    </button>
  </div>

  } @else {

  <h3 class="mb-3">Menú</h3>

  <ul class="list-group">
    <div class="categories-nav">
      @for (category of this.categories ; track category.id) {
      <span class="category-filter"> {{ category.name }}</span>
      @for (product of productsService.restaurantProducts; track product.id){
      @if (product.categoryId === category.id){
      <li class="list-group-item py-3">
        <div class="d-flex align-items-center justify-content-between">
          <a [routerLink]="['/product', product.id]"> <strong class="fs-5"> {{ product.name }} </strong> </a>
          <div>
            @if (product.discount > 0) {
            <span class="badge bg-danger me-2"> {{ product.discount }}% OFF </span>
            }
            @if (product.hasHappyHour) {
            <span class="badge bg-success"> Happy Hour </span>
            }
            @if (product.featured) {
            <span class="badge bg-success"> Producto destacado! </span>
            }
          </div>
        </div>
        <p class="mb-1 mt-2">{{ product.description }}</p>
        <p class="fw-bold mb-0">Precio: ${{ productsService.getFinalPrice(product) }}</p>
      </li>
      }
    }
  }
  </div>
  </ul>
  }
  }
</div>